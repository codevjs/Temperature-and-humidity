{"ast":null,"code":"import _regeneratorRuntime from\"/Users/Neutron/Project/Trisno/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/Neutron/Project/Trisno/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/Neutron/Project/Trisno/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useSubscription,useMqttState}from'mqtt-react-hooks';import'./App.css';import{useState}from\"react\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function App(){var _temperature$message,_temperature$message2,_humidity$message,_humidity$message2;var _useState=useState(20),_useState2=_slicedToArray(_useState,2),currentTemp=_useState2[0],setCurrenTemp=_useState2[1];var _useMqttState=useMqttState(),connectionStatus=_useMqttState.connectionStatus;var temperature=useSubscription('dht11/sensor/temperature/state');var humidity=useSubscription('dht11/sensor/humidity/state');var remote=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(entity){var purl,headers,raw,requestOptions,response,result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;purl=\"https://smarthome.orderindonesia.com/api/services/scene/turn_on\";// const url  = \"http://192.168.0.26:8123/api/services/scene/turn_on\";\nheaders=new Headers();headers.append(\"Authorization\",\"Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiI5MjIyZDY5NWM3ODA0MDhmOTE2NDk0MjZjMWQ3YWNjZSIsImlhdCI6MTY2MjY0NTU0MiwiZXhwIjoxOTc4MDA1NTQyfQ.9EZJoB4jP_a8rmE2efhZtUYkTPQiKFlHvP3DGRHhcJ4\");headers.append(\"Content-Type\",\"application/json\");raw=JSON.stringify({\"entity_id\":entity});requestOptions={method:'POST',headers:headers,body:raw};_context.next=9;return fetch(purl,requestOptions);case 9:response=_context.sent;_context.next=12;return response.json();case 12:result=_context.sent;console.log(result);if(!(result.length<1)){_context.next=16;break;}throw Error(\"Coba lagi\");case 16:_context.next=21;break;case 18:_context.prev=18;_context.t0=_context[\"catch\"](0);throw Error(_context.t0.message);case 21:case\"end\":return _context.stop();}}},_callee,null,[[0,18]]);}));return function remote(_x){return _ref.apply(this,arguments);};}();var changeTemp=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(val){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;if(!(val===-1&&currentTemp<=16)){_context2.next=3;break;}return _context2.abrupt(\"return\");case 3:if(!(val===1&&currentTemp>=28)){_context2.next=5;break;}return _context2.abrupt(\"return\");case 5:_context2.next=7;return remote(\"scene.ac_\".concat(currentTemp+val));case 7:setCurrenTemp(function(cur){return cur+val;});_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](0);alert(_context2.t0.message);case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[0,10]]);}));return function changeTemp(_x2){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"container overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-row justify-center pt-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"circle-track rounded-full\",children:/*#__PURE__*/_jsx(\"div\",{className:\"circle-progress rounded-full flex justify-center items-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"circle-inner bg-white rounded-full flex justify-center items-center\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"text-5xl font-light app-color-black\",children:[(temperature===null||temperature===void 0?void 0:(_temperature$message=temperature.message)===null||_temperature$message===void 0?void 0:_temperature$message.message)||0,\"\\xB0\"]})})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between px-12\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-2xl font-light app-color-blue\",children:[(temperature===null||temperature===void 0?void 0:(_temperature$message2=temperature.message)===null||_temperature$message2===void 0?void 0:_temperature$message2.message)||0,\"\\xB0\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-2xl font-light app-color-red\",children:[(humidity===null||humidity===void 0?void 0:(_humidity$message=humidity.message)===null||_humidity$message===void 0?void 0:_humidity$message.message)||0,\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col justify-center items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"app-color-purple\",children:\"\\xB0\"}),/*#__PURE__*/_jsx(\"span\",{className:\"app-font-sm tracking-widest app-color-purple -mt-2\",children:connectionStatus})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-row px-6 mt-4 justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(){return changeTemp(-1);},style:{cursor:\"pointer\"},className:\"flex flex-col h-36 w-20 items-center justify-between py-4 rounded-2xl\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-minus text-3xl app-color-purple\"}),/*#__PURE__*/_jsx(\"span\",{className:\"app-font-md font-semibold app-color-purple tracking-widest\",children:\"\\xA0\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col bg-white h-36 w-20 items-center justify-between py-4 rounded-2xl app-shadow\",children:[/*#__PURE__*/_jsx(\"i\",{style:{cursor:\"pointer\",color:\"red\"},onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return remote(\"scene.ac_on_off\");case 3:_context3.next=8;break;case 5:_context3.prev=5;_context3.t0=_context3[\"catch\"](0);alert(_context3.t0.message);case 8:case\"end\":return _context3.stop();}}},_callee3,null,[[0,5]]);})),className:\"fa-solid fa-power-off text-3xl app-color-red\"}),/*#__PURE__*/_jsxs(\"span\",{style:{fontSize:20},className:\"app-font-md font-semibold app-color-black tracking-widest\",children:[currentTemp,\"\\xB0\"]})]}),/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(){return changeTemp(1);},style:{cursor:\"pointer\"},className:\"flex flex-col h-36 w-20 items-center justify-between py-4 rounded-2xl\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-plus text-3xl app-color-purple\"}),/*#__PURE__*/_jsx(\"span\",{className:\"app-font-md font-semibold app-color-purple tracking-widest\",children:\"\\xA0\"})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{textTransform:\"uppercase\"},className:\"text-center mt-6 app-font-md font-semibold app-color-black tracking-widest\",children:\"humidity\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center mt-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-px h-3 bg-gray-400\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between px-6 mt-6\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa-regular fa-clone app-color-black\"}),/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-repeat app-color-black\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-48 h-48 bg-red-500 transform rotate-45 power-bg\"}),/*#__PURE__*/_jsxs(\"span\",{style:{marginTop:\"70px\"},className:\"absolute text-5xl font-light app-color-black\",children:[(humidity===null||humidity===void 0?void 0:(_humidity$message2=humidity.message)===null||_humidity$message2===void 0?void 0:_humidity$message2.message)||0,\"%\"]})]})]});}export default App;","map":{"version":3,"names":["useSubscription","useMqttState","useState","App","currentTemp","setCurrenTemp","connectionStatus","temperature","humidity","remote","entity","purl","headers","Headers","append","raw","JSON","stringify","requestOptions","method","body","fetch","response","json","result","console","log","length","Error","message","changeTemp","val","cur","alert","cursor","color","fontSize","textTransform","marginTop"],"sources":["/Users/Neutron/Project/Trisno/client/src/App.js"],"sourcesContent":["import { useSubscription, useMqttState } from 'mqtt-react-hooks';\nimport './App.css';\nimport {useState} from \"react\";\n\nfunction App() {\n\n    const [currentTemp, setCurrenTemp] = useState(20);\n    const { connectionStatus }         = useMqttState();\n\n    const temperature = useSubscription('dht11/sensor/temperature/state');\n    const humidity    = useSubscription('dht11/sensor/humidity/state');\n\n    const remote = async (entity) => {\n        try {\n\n            const purl = \"https://smarthome.orderindonesia.com/api/services/scene/turn_on\"\n            // const url  = \"http://192.168.0.26:8123/api/services/scene/turn_on\";\n\n            const headers = new Headers();\n\n            headers.append(\"Authorization\", \"Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiI5MjIyZDY5NWM3ODA0MDhmOTE2NDk0MjZjMWQ3YWNjZSIsImlhdCI6MTY2MjY0NTU0MiwiZXhwIjoxOTc4MDA1NTQyfQ.9EZJoB4jP_a8rmE2efhZtUYkTPQiKFlHvP3DGRHhcJ4\");\n            headers.append(\"Content-Type\", \"application/json\");\n\n            const raw = JSON.stringify({\"entity_id\" : entity});\n\n            const requestOptions = {\n                method: 'POST',\n                headers: headers,\n                body: raw,\n            };\n\n            const response = await fetch(purl, requestOptions)\n\n            const result = await response.json();\n\n            console.log(result);\n\n            if (result.length < 1) {\n\n                throw Error(\"Coba lagi\")\n            }\n        }catch (e) {\n\n\n            throw Error(e.message)\n        }\n    }\n\n    const changeTemp = async (val) => {\n        try {\n            if (val === -1 && currentTemp <= 16)\n                return\n\n            if (val === 1 && currentTemp >= 28)\n                return;\n\n            await remote(`scene.ac_${currentTemp + val}`);\n\n            setCurrenTemp(cur => cur + val)\n        } catch (e) {\n\n            alert(e.message)\n        }\n    }\n\n  return (\n      <div className=\"container overflow-hidden\">\n        <div className=\"flex flex-row justify-center pt-0\">\n          <div className=\"circle-track rounded-full\">\n            <div className=\"circle-progress rounded-full flex justify-center items-center\">\n              <div className=\"circle-inner bg-white rounded-full flex justify-center items-center\">\n                {/*<div className=\"pointer app-bg-color-black h-1 w-1 rounded-full\"/>*/}\n                <span className=\"text-5xl font-light app-color-black\">{temperature?.message?.message || 0}째</span>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div className=\"flex justify-between px-12\">\n          <span className=\"text-2xl font-light app-color-blue\">{temperature?.message?.message || 0}째</span>\n          <span className=\"text-2xl font-light app-color-red\">{humidity?.message?.message || 0}%</span>\n        </div>\n        <div className=\"flex flex-col justify-center items-center\">\n          <span className=\"app-color-purple\">째</span>\n          <span className=\"app-font-sm tracking-widest app-color-purple -mt-2\">{connectionStatus}</span>\n        </div>\n\n        <div className=\"flex flex-row px-6 mt-4 justify-between\">\n          <div onClick={() => changeTemp(-1)} style={{cursor : \"pointer\"}} className=\"flex flex-col h-36 w-20 items-center justify-between py-4 rounded-2xl\">\n            <i className=\"fa-solid fa-minus text-3xl app-color-purple\"/>\n            <span className=\"app-font-md font-semibold app-color-purple tracking-widest\">&nbsp;</span>\n          </div>\n            <div className=\"flex flex-col bg-white h-36 w-20 items-center justify-between py-4 rounded-2xl app-shadow\">\n                <i style={{cursor : \"pointer\", color : \"red\"}} onClick={async () => {\n                    try {\n                        await remote(`scene.ac_on_off`)\n                    } catch (e) {\n\n                        alert(e.message)\n                    }\n                }} className=\"fa-solid fa-power-off text-3xl app-color-red\"/>\n                <span style={{fontSize : 20}} className=\"app-font-md font-semibold app-color-black tracking-widest\">\n                    {currentTemp}째\n                </span>\n            </div>\n          <div onClick={() => changeTemp(1)} style={{cursor : \"pointer\"}} className=\"flex flex-col h-36 w-20 items-center justify-between py-4 rounded-2xl\">\n              <i className=\"fa-solid fa-plus text-3xl app-color-purple\"/>\n              <span className=\"app-font-md font-semibold app-color-purple tracking-widest\">&nbsp;</span>\n          </div>\n        </div>\n          <div style={{textTransform :\"uppercase\"}} className=\"text-center mt-6 app-font-md font-semibold app-color-black tracking-widest\">humidity</div>\n          <div className=\"flex justify-center mt-2\">\n              <div className=\"w-px h-3 bg-gray-400\"/>\n          </div>\n          <div className=\"flex justify-between px-6 mt-6\">\n              <i className=\"fa-regular fa-clone app-color-black\"/>\n              <i className=\"fa-solid fa-repeat app-color-black\"/>\n          </div>\n          <div className=\"flex justify-center relative\">\n              <div className=\"w-48 h-48 bg-red-500 transform rotate-45 power-bg\"/>\n              <span style={{marginTop : \"70px\"}} className=\"absolute text-5xl font-light app-color-black\">{humidity?.message?.message || 0}%</span>\n              {/*<i className=\"fa-solid fa-power-off absolute text-3xl app-color-black\"/>*/}\n          </div>\n      </div>\n  );\n}\n\nexport default App;\n"],"mappings":"8XAAA,OAASA,eAAT,CAA0BC,YAA1B,KAA8C,kBAA9C,CACA,MAAO,WAAP,CACA,OAAQC,QAAR,KAAuB,OAAvB,C,wFAEA,QAASC,IAAT,EAAe,qFAEX,cAAqCD,QAAQ,CAAC,EAAD,CAA7C,wCAAOE,WAAP,eAAoBC,aAApB,eACA,kBAAqCJ,YAAY,EAAjD,CAAQK,gBAAR,eAAQA,gBAAR,CAEA,GAAMC,YAAW,CAAGP,eAAe,CAAC,gCAAD,CAAnC,CACA,GAAMQ,SAAQ,CAAMR,eAAe,CAAC,6BAAD,CAAnC,CAEA,GAAMS,OAAM,4FAAG,iBAAOC,MAAP,wLAGDC,IAHC,CAGM,iEAHN,CAIP;AAEMC,OANC,CAMS,GAAIC,QAAJ,EANT,CAQPD,OAAO,CAACE,MAAR,CAAe,eAAf,CAAgC,gMAAhC,EACAF,OAAO,CAACE,MAAR,CAAe,cAAf,CAA+B,kBAA/B,EAEMC,GAXC,CAWKC,IAAI,CAACC,SAAL,CAAe,CAAC,YAAcP,MAAf,CAAf,CAXL,CAaDQ,cAbC,CAagB,CACnBC,MAAM,CAAE,MADW,CAEnBP,OAAO,CAAEA,OAFU,CAGnBQ,IAAI,CAAEL,GAHa,CAbhB,uBAmBgBM,MAAK,CAACV,IAAD,CAAOO,cAAP,CAnBrB,QAmBDI,QAnBC,sCAqBcA,SAAQ,CAACC,IAAT,EArBd,SAqBDC,MArBC,eAuBPC,OAAO,CAACC,GAAR,CAAYF,MAAZ,EAvBO,KAyBHA,MAAM,CAACG,MAAP,CAAgB,CAzBb,gCA2BGC,MAAK,CAAC,WAAD,CA3BR,+FAgCDA,MAAK,CAAC,YAAEC,OAAH,CAhCJ,sEAAH,kBAANpB,OAAM,4CAAZ,CAoCA,GAAMqB,WAAU,6FAAG,kBAAOC,GAAP,8IAEPA,GAAG,GAAK,CAAC,CAAT,EAAc3B,WAAW,EAAI,EAFtB,yEAKP2B,GAAG,GAAK,CAAR,EAAa3B,WAAW,EAAI,EALrB,2FAQLK,OAAM,oBAAaL,WAAW,CAAG2B,GAA3B,EARD,QAUX1B,aAAa,CAAC,SAAA2B,GAAG,QAAIA,IAAG,CAAGD,GAAV,EAAJ,CAAb,CAVW,qFAaXE,KAAK,CAAC,aAAEJ,OAAH,CAAL,CAbW,uEAAH,kBAAVC,WAAU,8CAAhB,CAiBF,mBACI,aAAK,SAAS,CAAC,2BAAf,wBACE,YAAK,SAAS,CAAC,mCAAf,uBACE,YAAK,SAAS,CAAC,2BAAf,uBACE,YAAK,SAAS,CAAC,+DAAf,uBACE,YAAK,SAAS,CAAC,qEAAf,uBAEE,cAAM,SAAS,CAAC,qCAAhB,WAAuD,CAAAvB,WAAW,OAAX,EAAAA,WAAW,SAAX,8BAAAA,WAAW,CAAEsB,OAAb,oEAAsBA,OAAtB,GAAiC,CAAxF,UAFF,EADF,EADF,EADF,EADF,cAWE,aAAK,SAAS,CAAC,4BAAf,wBACE,cAAM,SAAS,CAAC,oCAAhB,WAAsD,CAAAtB,WAAW,OAAX,EAAAA,WAAW,SAAX,+BAAAA,WAAW,CAAEsB,OAAb,sEAAsBA,OAAtB,GAAiC,CAAvF,UADF,cAEE,cAAM,SAAS,CAAC,mCAAhB,WAAqD,CAAArB,QAAQ,OAAR,EAAAA,QAAQ,SAAR,2BAAAA,QAAQ,CAAEqB,OAAV,8DAAmBA,OAAnB,GAA8B,CAAnF,OAFF,GAXF,cAeE,aAAK,SAAS,CAAC,2CAAf,wBACE,aAAM,SAAS,CAAC,kBAAhB,kBADF,cAEE,aAAM,SAAS,CAAC,oDAAhB,UAAsEvB,gBAAtE,EAFF,GAfF,cAoBE,aAAK,SAAS,CAAC,yCAAf,wBACE,aAAK,OAAO,CAAE,yBAAMwB,WAAU,CAAC,CAAC,CAAF,CAAhB,EAAd,CAAoC,KAAK,CAAE,CAACI,MAAM,CAAG,SAAV,CAA3C,CAAiE,SAAS,CAAC,uEAA3E,wBACE,UAAG,SAAS,CAAC,6CAAb,EADF,cAEE,aAAM,SAAS,CAAC,4DAAhB,kBAFF,GADF,cAKI,aAAK,SAAS,CAAC,2FAAf,wBACI,UAAG,KAAK,CAAE,CAACA,MAAM,CAAG,SAAV,CAAqBC,KAAK,CAAG,KAA7B,CAAV,CAA+C,OAAO,wEAAE,kLAE1C1B,OAAM,mBAFoC,0FAKhDwB,KAAK,CAAC,aAAEJ,OAAH,CAAL,CALgD,qEAAF,EAAtD,CAOG,SAAS,CAAC,8CAPb,EADJ,cASI,cAAM,KAAK,CAAE,CAACO,QAAQ,CAAG,EAAZ,CAAb,CAA8B,SAAS,CAAC,2DAAxC,WACKhC,WADL,UATJ,GALJ,cAkBE,aAAK,OAAO,CAAE,yBAAM0B,WAAU,CAAC,CAAD,CAAhB,EAAd,CAAmC,KAAK,CAAE,CAACI,MAAM,CAAG,SAAV,CAA1C,CAAgE,SAAS,CAAC,uEAA1E,wBACI,UAAG,SAAS,CAAC,4CAAb,EADJ,cAEI,aAAM,SAAS,CAAC,4DAAhB,kBAFJ,GAlBF,GApBF,cA2CI,YAAK,KAAK,CAAE,CAACG,aAAa,CAAE,WAAhB,CAAZ,CAA0C,SAAS,CAAC,4EAApD,sBA3CJ,cA4CI,YAAK,SAAS,CAAC,0BAAf,uBACI,YAAK,SAAS,CAAC,sBAAf,EADJ,EA5CJ,cA+CI,aAAK,SAAS,CAAC,gCAAf,wBACI,UAAG,SAAS,CAAC,qCAAb,EADJ,cAEI,UAAG,SAAS,CAAC,oCAAb,EAFJ,GA/CJ,cAmDI,aAAK,SAAS,CAAC,8BAAf,wBACI,YAAK,SAAS,CAAC,mDAAf,EADJ,cAEI,cAAM,KAAK,CAAE,CAACC,SAAS,CAAG,MAAb,CAAb,CAAmC,SAAS,CAAC,8CAA7C,WAA6F,CAAA9B,QAAQ,OAAR,EAAAA,QAAQ,SAAR,4BAAAA,QAAQ,CAAEqB,OAAV,gEAAmBA,OAAnB,GAA8B,CAA3H,OAFJ,GAnDJ,GADJ,CA2DD,CAED,cAAe1B,IAAf"},"metadata":{},"sourceType":"module"}